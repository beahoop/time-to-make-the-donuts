(this.webpackJsonpstatic=this.webpackJsonpstatic||[]).push([[0],{33:function(e,t,i){},41:function(e,t,i){},42:function(e,t,i){"use strict";i.r(t);var n=i(1),s=i.n(n),a=i(25),c=i.n(a),r=(i(32),i(33),i(16)),l=i.n(r),o=i(18),d=i(15),p=i(5),u=i(6),h=i(2),j=i(8),m=i(7),b=i(10),g=i.n(b),O=i(11),x=i(3),v=i(0);var f=function(e){var t=e.isLoggedIn;return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)("div",{className:"navbar sticky-top navbar-light bg-light",children:[Object(v.jsx)("span",{className:"navbar-brand",children:Object(v.jsx)(O.b,{to:"/recipes",children:"The Pie Chart"})}),Object(v.jsx)("span",{className:"navbar-brand",children:Object(v.jsx)(O.b,{to:"/recipes",children:"Batch Maker"})}),Object(v.jsx)("span",{className:"navbar-brand plus",children:Object(v.jsx)(O.b,{to:"/recipeform",children:"+"})}),t?null:Object(v.jsxs)("span",{children:[Object(v.jsx)("span",{className:"navbar-brand",children:Object(v.jsx)(O.b,{to:"/login/",children:"Login"})}),Object(v.jsxs)("span",{className:"navbar-brand",children:[Object(v.jsx)(O.b,{to:"/register/",children:"Register"})," "]})]}),t?Object(v.jsx)("span",{className:"navbar-brand",children:Object(v.jsx)("span",{className:"navbar-brand",onClick:function(t){return e.handleLogOut(t)},type:"submit",children:"LogOut"})}):null]})})};var y=function(e){var t=e.isLoggedIn;return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)("div",{className:"sidebar",children:[t?Object(v.jsx)("p",{className:"",children:Object(v.jsx)(O.b,{to:"/user/recipes",children:"Edit My Recipes"})}):null,Object(v.jsx)("p",{className:"",children:Object(v.jsx)(O.b,{to:"/public/recipes",children:"Public Recipes"})}),Object(v.jsx)("p",{className:"",children:Object(v.jsx)(O.b,{to:"/Popular/recipes",children:"Popular Recipes"})})]})})},N=function(e){Object(j.a)(i,e);var t=Object(m.a)(i);function i(){return Object(p.a)(this,i),t.apply(this,arguments)}return Object(u.a)(i,[{key:"render",value:function(){var e=this.props.recipe;return console.log("recipe",e),Object(v.jsx)(v.Fragment,{children:Object(v.jsx)("div",{className:"listImg",children:Object(v.jsx)("a",{href:"/recipe/edit/".concat(e.id),children:Object(v.jsx)("img",{className:"homepage-img",src:e.image,alt:"preview"})})})})}}]),i}(n.Component);var k=function(e){console.log(e);var t=e.recipes.filter((function(e){return JSON.parse(localStorage.getItem("user")).username===e.author?e:console.log("nope")})).map((function(t){return Object(v.jsx)(N,{recipe:t,articles:e.aRecipe,editRecipe:e.editRecipe,isLoggedIn:e.isLoggedIn,removeRecipe:e.removeRecipe},t.id)}));return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("div",{className:"divider  col-4 col-md-6 col-lg-8 col-xl-9",children:"My Repices"})}),Object(v.jsxs)("ul",{className:"row",children:[" ",t,"  "]})]})},I=i(27),w=i(9),C=function(e){Object(j.a)(i,e);var t=Object(m.a)(i);function i(e){var n;return Object(p.a)(this,i),(n=t.call(this,e)).state={title:"",qty:"",unit:"",type:"",prep_time:"",cook_temp:"",cook_time:"",yields:"",food_type:"",ingredients:[],directions:"",notes:"",image:n.props.recipeImage,preview:"",author:JSON.parse(localStorage.getItem("user")).username},n.handleInput=n.handleInput.bind(Object(h.a)(n)),n.handleImage=n.handleImage.bind(Object(h.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(h.a)(n)),n.addIngredient=n.addIngredient.bind(Object(h.a)(n)),n}return Object(u.a)(i,[{key:"addIngredient",value:function(e,t,i){var n=Object(d.a)(this.state.ingredients),s={qty:e,unit:t,type:i};n.push(s),this.setState({ingredients:n}),this.setState({qty:"",unit:"",type:""})}},{key:"removeIngredient",value:function(e){var t=Object(d.a)(this.state.ingredients),i=t.indexOf(e);t.splice(i,1),this.setState({ingredients:t})}},{key:"handleInput",value:function(e){this.setState(Object(w.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(){var e=Object(o.a)(l.a.mark((function e(t){var i,n,s,a,c,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(s in t.preventDefault(),i=new FormData,(n=Object(I.a)({},this.state)).ingredients=JSON.stringify(n.ingredients),n)i.append(s,n[s]);return a={method:"POST",headers:{"X-CSRFToken":g.a.get("csrftoken")},body:i},c=function(e){return console.warn(e)},e.next=10,fetch("/api/v1/",a);case 10:return r=e.sent,e.next=13,r.json().catch(c);case 13:this.setState({title:"",prep_time:"",cook_temp:"",cook_time:"",yields:"",food_type:"",ingredients:[],directions:"",notes:"",image:"",preview:""});case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleImage",value:function(e){var t=this;console.log("I FIRED");var i=e.target.files[0];this.setState({image:i});var n=new FileReader;n.onloadend=function(){t.setState({preview:n.result})},n.readAsDataURL(i)}},{key:"render",value:function(){var e=this,t=this.state.ingredients.map((function(t,i){return Object(v.jsxs)("li",{children:[Object(v.jsx)("input",{type:"qty",id:"recipe-qty",name:"qty",value:t.qty,onChange:e.handleInput,placeholder:t.qty,required:!0}),Object(v.jsx)("input",{type:"unit",id:"recipe-unit",name:"unit",value:t.unit,onChange:e.handleInput,placeholder:t.unit,required:!0})," of",Object(v.jsx)("input",{type:"type",id:"recipe-type",name:"type",value:t.type,onChange:e.handleInput,placeholder:t.type,required:!0}),Object(v.jsx)("button",{onClick:function(){return e.removeIngredient(t)},children:" -"})]},i)}));return Object(v.jsx)(v.Fragment,{children:Object(v.jsx)("div",{className:"recipeForm row ",children:Object(v.jsxs)("form",{className:"formRep col-12 col-md-9 mx-auto",children:[Object(v.jsxs)("div",{className:"row",children:[Object(v.jsxs)("div",{className:"preimg col-5 col-md-4",children:[!this.state.image&&Object(v.jsxs)("span",{children:[Object(v.jsxs)("label",{for:"file-upload",className:"custom-file-upload",children:[Object(v.jsx)("p",{className:"imagePlus",children:" + "}),Object(v.jsx)("p",{className:"imageText",children:" Add photo"})]})," ",Object(v.jsx)("input",{id:"file-upload",type:"file",name:"image",onChange:this.handleImage})]}),this.state.image&&Object(v.jsx)("img",{className:"pre-img",src:this.state.preview,alt:"preview"})]}),Object(v.jsxs)("div",{className:"col",children:[Object(v.jsxs)("div",{class:"input-group mb-3",children:[Object(v.jsx)("div",{class:"input-group-prepend",children:Object(v.jsx)("span",{class:"input-group-text",id:"inputGroup-sizing-default",children:"Title"})}),Object(v.jsx)("input",{type:"text",className:"form-control","aria-label":"Sizing example input","aria-describedby":"inputGroup-sizing-default",id:"recipe-title",name:"title",value:this.state.title,onChange:this.handleInput,placeholder:"Title",required:!0}),Object(v.jsx)("br",{})]}),Object(v.jsxs)("p",{className:"repice-author",children:["By: ",this.state.author]}),Object(v.jsxs)("select",{className:" col-3 custom-select custom-select-sm",id:"published",name:"Published",required:!0,children:[Object(v.jsx)("option",{value:"Private",children:"Private"}),Object(v.jsx)("option",{value:"Public",children:"Public"}),Object(v.jsx)("option",{value:"Popular",children:"Popular"}),Object(v.jsx)("option",{value:"Draft",children:"Draft"})]})]})]}),Object(v.jsxs)("div",{className:"row sp mx-auto",children:[Object(v.jsxs)("select",{className:" col-3 custom-select custom-select-sm",id:"meal_type",name:"meal_type",required:!0,children:[Object(v.jsx)("option",{value:"Breakfast",children:"Breakfast"}),Object(v.jsx)("option",{value:"Lunch",children:"Lunch"}),Object(v.jsx)("option",{value:"Dinner",children:"Dinner"}),Object(v.jsx)("option",{value:"Dessert",children:"Dessert"})]}),Object(v.jsx)("div",{className:"input-group col-3 input-group-sm mb-3",children:Object(v.jsx)("input",{className:"form-control",type:"prep_time",id:"recipe-prep-time",name:"prep_time",value:this.state.prep_time,onChange:this.handleInput,placeholder:"Prep time",required:!0})}),Object(v.jsx)("div",{className:"input-group col-3 input-group-sm mb-3",children:Object(v.jsx)("input",{className:"form-control",type:"cook_time",id:"recipe-cook-time",name:"cook_time",value:this.state.cook_time,onChange:this.handleInput,placeholder:"Cook time",required:!0})}),Object(v.jsx)("div",{className:"input-group col-2 input-group-sm mb-3",children:Object(v.jsx)("input",{className:"form-control",type:"cook_temp",id:"recipe-cook-temp",name:"cook_temp",value:this.state.cook_temp,onChange:this.handleInput,placeholder:"Cook temp",required:!0})}),Object(v.jsxs)("select",{className:"col-1  custom-select custom-select-sm",id:"Degree",name:"Degree",required:!0,children:[Object(v.jsx)("option",{value:"F",children:"F"}),Object(v.jsx)("option",{value:"C",children:"C"})]})]}),Object(v.jsxs)("div",{className:"row ingul",children:[Object(v.jsx)("ul",{className:"",children:t}),Object(v.jsx)("div",{className:"input-group col-2 input-group-sm mb-3",children:Object(v.jsx)("input",{className:"form-control",type:"qty",id:"recipe-qty",name:"qty",value:this.state.qty,onChange:this.handleInput,placeholder:"qty",required:!0})}),Object(v.jsxs)("div",{className:"input-group col-4 input-group-sm mb-3",children:[" ",Object(v.jsx)("input",{className:"form-control",type:"unit",id:"recipe-unit",name:"unit",value:this.state.unit,onChange:this.handleInput,placeholder:"unit"})]}),"of",Object(v.jsx)("div",{className:"input-group col-4 input-group-sm mb-3",children:Object(v.jsx)("input",{className:"form-control",type:"type",id:"recipe-type",name:"type",value:this.state.type,onChange:this.handleInput,placeholder:"type",required:!0})}),Object(v.jsx)("button",{className:"btnAdd btn btn-outline-info col-1",style:{height:"30px"},onClick:function(){return e.addIngredient(e.state.qty,e.state.unit,e.state.type)},children:"  + "})]}),Object(v.jsxs)("div",{className:"row sp mx-auto",children:["This recipe makes",Object(v.jsx)("div",{className:"input-group col-4 input-group-sm mb-3",children:Object(v.jsx)("input",{className:"form-control",type:"yields",id:"recipe-yields",name:"yields",value:this.state.yields,onChange:this.handleInput,placeholder:"yields",required:!0})}),Object(v.jsx)("div",{className:"input-group col-4 input-group-sm mb-3",children:Object(v.jsx)("input",{className:"form-control",type:"food_type",id:"recipe-food_type",name:"food_type",value:this.state.food_type,onChange:this.handleInput,placeholder:"Muffins, donuts, etc...",required:!0})})]}),Object(v.jsxs)("div",{className:"row sp mx-auto",children:[Object(v.jsxs)("div",{class:"mb-3",children:[Object(v.jsx)("label",{for:"exampleFormControlTextarea1",class:"form-label",children:"Example textarea"}),Object(v.jsx)("textarea",{class:"form-control",id:"exampleFormControlTextarea1",name:"directions",value:this.state.directions,onChange:this.handleInput,placeholder:"Directions",rows:"3"})]}),Object(v.jsxs)("div",{class:"mb-3",children:[Object(v.jsx)("label",{for:"exampleFormControlTextarea1",class:"form-label",children:"Example textarea"}),Object(v.jsx)("textarea",{class:"form-control",id:"exampleFormControlTextarea1",name:"notes",value:this.state.notes,onChange:this.handleInput,placeholder:"Notes",rows:"3"})]})]}),Object(v.jsx)("div",{class:"d-grid gap-2 col-6 mx-auto",children:Object(v.jsx)("button",{className:"btn btn-outline-info",type:"button",onClick:this.handleSubmit,children:"Submit"})})]})})})}}]),i}(n.Component),S=function(e){Object(j.a)(i,e);var t=Object(m.a)(i);function i(e){var n;return Object(p.a)(this,i),(n=t.call(this,e)).state={isEditing:!1,recipe:[],recipes:[],title:"",qty:"",unit:"",type:"",prep_time:"",cook_temp:"",cook_time:"",type_meal:"",yields:"",food_type:"",ingredients:[],directions:"",notes:"",image:n.props.recipeImage,preview:n.props.preview,newyields:null},n.handleInputEdit=n.handleInputEdit.bind(Object(h.a)(n)),n.handleChange=n.handleChange.bind(Object(h.a)(n)),n.handleEdit=n.handleEdit.bind(Object(h.a)(n)),n.removeRecipe=n.removeRecipe.bind(Object(h.a)(n)),n.handleInput=n.handleInput.bind(Object(h.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(h.a)(n)),n.addIngredient=n.addIngredient.bind(Object(h.a)(n)),n}return Object(u.a)(i,[{key:"componentDidMount",value:function(){var e=this;fetch("/api/v1/").then((function(e){return e.json()})).then((function(t){console.log("response",t),e.setState({recipes:t})}),(function(t){e.setState({error:t})})),fetch("/api/v1/".concat(this.props.match.params.id)).then((function(e){return e.json()})).then((function(t){console.log("response",t),e.setState({recipe:t,type_meal:t.type_meal,yields:t.yields,newyields:t.yields,title:t.title,ingredients:t.ingredients,prep_time:t.prep_time,cook_temp:t.cook_temp,cook_time:t.cook_time,food_type:t.food_type,directions:t.directions,notes:t.notes,image:t.image})}),(function(t){e.setState({error:t})}))}},{key:"removeRecipe",value:function(e){var t=this,i=Object(d.a)(this.state.recipes),n=i.indexOf(e);i.splice(n,1),this.setState({recipes:i}),fetch("/api/v1/edit/".concat(e.id),{method:"DELETE",headers:{"Content-Type":"application/json","X-CSRFToken":g.a.get("csrftoken")}}).then((function(e){if(!e.ok)throw new Error("Bad Post request")})).catch((function(e){return console.log("Error:",e)})).finally((function(){return t.props.history.push("/recipes")}))}},{key:"handleEdit",value:function(e,t){13===e.keyCode&&this.setState({isEditing:!1})}},{key:"handleInputEdit",value:function(e){this.setState(Object(w.a)({},e.target.name,e.target.value))}},{key:"addIngredient",value:function(e,t,i){var n=Object(d.a)(this.state.ingredients),s={qty:e,unit:t,type:i};n.push(s),this.setState({ingredients:n}),this.setState({qty:"",unit:"",type:""})}},{key:"removeIngredient",value:function(e){var t=Object(d.a)(this.state.ingredients),i=t.indexOf(e);t.splice(i,1),this.setState({ingredients:t})}},{key:"handleInput",value:function(e){this.setState(Object(w.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){var t={type_meal:this.state.type_meal,image:this.props.recipeImage,title:this.state.title,prep_time:this.state.prep_time,cook_temp:this.state.cook_temp,cook_time:this.state.cook_time,yields:this.state.yields,food_type:this.state.food_type,ingredients:this.state.ingredients,directions:this.state.directions,notes:this.state.notes};fetch("/api/v1/".concat(this.props.match.params.id),{method:"PUT",headers:{"Content-Type":"application/json","X-CSRFToken":g.a.get("csrftoken")},body:JSON.stringify(t)}).then((function(e){if(!e.ok)throw new Error("Bad Post request");return e.json()})).then((function(e){return console.log("Success. ChatApp created!")})).catch((function(e){return console.log("Error:",e)})).finally("I am always going to fire!")}},{key:"handleChange",value:function(e){console.log(e.target.name,e.target.value),this.setState(Object(w.a)({},e.target.name,e.target.value))}},{key:"render",value:function(){var e,t=this,i=this.state.recipe,n=this.state.newyields/this.state.yields,s=null===(e=this.state.recipe.ingredients)||void 0===e?void 0:e.map((function(e,t){return Object(v.jsx)("li",{children:Object(v.jsxs)("h2",{children:[e.qty*n," ",e.unit," of ",e.type,"  "]})},t)})),a=this.state.ingredients.map((function(e,i){return Object(v.jsxs)("li",{children:[Object(v.jsx)("input",{type:"qty",id:"recipe-qty",name:"qty",value:e.qty,onChange:t.handleInput,placeholder:e.qty,required:!0}),Object(v.jsx)("input",{type:"unit",id:"recipe-unit",name:"unit",value:e.unit,onChange:t.handleInput,placeholder:e.unit,required:!0})," of",Object(v.jsx)("input",{type:"type",id:"recipe-type",name:"type",value:e.type,onChange:t.handleInput,placeholder:e.type,required:!0}),Object(v.jsx)("button",{onClick:function(){return t.removeIngredient(e)},children:" -"})]},i)}));return Object(v.jsxs)(v.Fragment,{children:[this.state.isEditing?Object(v.jsx)("div",{className:"RecipeForm row",children:Object(v.jsxs)("form",{className:"form",children:[Object(v.jsx)("div",{className:"img-container",children:Object(v.jsx)("img",{className:"recipe-img",src:i.image,alt:"preview"})}),Object(v.jsxs)("span",{children:[Object(v.jsx)("label",{for:"file-upload",className:"edit-file-upload",children:Object(v.jsx)("p",{className:"imageEdit",children:" Edit Photo "})})," ",Object(v.jsx)("input",{id:"file-upload",type:"file",name:"recipeImage",onChange:this.props.handleImage})]}),this.props.recipeImage&&Object(v.jsx)("img",{className:"pre-img",src:this.props.preview,alt:"preview"}),Object(v.jsxs)("div",{class:"input-group mb-3",children:[Object(v.jsx)("div",{class:"input-group-prepend",children:Object(v.jsx)("span",{class:"input-group-text",id:"inputGroup-sizing-default",children:"Title"})}),Object(v.jsx)("input",{type:"text",className:"form-control","aria-label":"Sizing example input","aria-describedby":"inputGroup-sizing-default",id:"recipe-title",name:"title",value:this.state.title,onChange:this.handleInput,placeholder:"Title",required:!0}),Object(v.jsx)("br",{})]}),Object(v.jsxs)("select",{id:"type_meal",name:"type_meal",value:this.state.type_meal,onChange:this.handleChange,defaultValue:this.state.type_meal,required:!0,children:[Object(v.jsx)("option",{value:"Breakfast",children:"Breakfast"}),Object(v.jsx)("option",{value:"Lunch",children:"Lunch"}),Object(v.jsx)("option",{value:"Dinner",children:"Dinner"}),Object(v.jsx)("option",{value:"Dessert",children:"Dessert"})]}),Object(v.jsxs)("select",{id:"published",name:"Published",required:!0,children:[Object(v.jsx)("option",{value:"PRI",children:"Private"}),Object(v.jsx)("option",{value:"PUB",children:"Public"}),Object(v.jsx)("option",{value:"DFT",children:"Draft"})]}),Object(v.jsx)("input",{type:"prep_time",id:"recipe-prep-time",name:"prep_time",value:this.state.prep_time,onChange:this.handleInput,placeholder:"Prep time",required:!0}),Object(v.jsx)("br",{}),Object(v.jsx)("input",{type:"cook_time",id:"recipe-cook-time",name:"cook_time",value:this.state.cook_time,onChange:this.handleInput,placeholder:"Cook time",required:!0}),Object(v.jsx)("br",{}),Object(v.jsx)("input",{type:"cook_temp",id:"recipe-cook-temp",name:"cook_temp",value:this.state.cook_temp,onChange:this.handleInput,placeholder:"Cook temp",required:!0}),Object(v.jsxs)("select",{id:"Degree",name:"Degree",required:!0,children:[Object(v.jsx)("option",{value:"F",children:"F"}),Object(v.jsx)("option",{value:"C",children:"C"})]}),Object(v.jsx)("input",{type:"yields",id:"recipe-yields",name:"yields",value:this.state.yields,onChange:this.handleInput,placeholder:"yieldss",required:!0}),Object(v.jsx)("br",{}),Object(v.jsx)("input",{type:"food_type",id:"recipe-food_type",name:"food_type",value:this.state.food_type,onChange:this.handleInput,placeholder:"Muffins, donuts, etc...",required:!0}),Object(v.jsx)("br",{}),Object(v.jsx)("textarea",{rows:"4",cols:"50",type:"directions",id:"recipe-directions",name:"directions",value:this.state.directions,onChange:this.handleInput,placeholder:"Directions",required:!0}),Object(v.jsx)("br",{}),Object(v.jsx)("textarea",{rows:"4",cols:"50",type:"notes",id:"recipe-notes",name:"notes",value:this.state.notes,onChange:this.handleInput,placeholder:"Notes",required:!0}),Object(v.jsx)("br",{}),Object(v.jsx)("ul",{children:a}),Object(v.jsxs)("div",{className:"example",children:[Object(v.jsx)("input",{type:"qty",id:"recipe-qty",name:"qty",value:this.state.qty,onChange:this.handleInput,placeholder:"qty",required:!0}),Object(v.jsx)("input",{type:"unit",id:"recipe-unit",name:"unit",value:this.state.unit,onChange:this.handleInput,placeholder:"unit"})," of",Object(v.jsx)("input",{type:"type",id:"recipe-type",name:"type",value:this.state.type,onChange:this.handleInput,placeholder:"type",required:!0}),Object(v.jsx)("button",{onClick:function(){return t.addIngredient(t.state.qty,t.state.unit,t.state.type)},children:" + "})]}),Object(v.jsx)("button",{type:"button",onClick:this.handleSubmit,children:"Submit"})]})}):Object(v.jsxs)("li",{className:"repice-li",children:[Object(v.jsx)("div",{className:"img-container",children:Object(v.jsx)("img",{className:"recipe-img",src:i.image,alt:"preview"})}),Object(v.jsx)("h4",{className:"repice-title",children:i.title}),Object(v.jsx)("p",{className:"repice-type",children:i.type_meal}),Object(v.jsxs)("span",{className:"repice-yields",children:["yields ",this.state.yields," "]}),Object(v.jsx)("br",{}),Object(v.jsxs)("span",{className:"repice-type",children:["Prep time: ",i.prep_time," |"]}),Object(v.jsxs)("span",{className:"repice-type",children:["Cook time: ",i.cook_time," |"]}),Object(v.jsxs)("span",{className:"repice-type",children:[" ",i.cook_temp," ",i.degree," |"]}),Object(v.jsx)("p",{className:"repice-list-text",children:i.directions}),Object(v.jsx)("ul",{children:s}),Object(v.jsxs)("p",{className:"repice-author",children:["Writen by: ",i.author]}),Object(v.jsxs)("p",{className:"repice-published",children:["This repice is ",i.published]}),Object(v.jsxs)("p",{className:"repice-published",children:["Directions ",i.directions]}),Object(v.jsxs)("p",{className:"repice-published",children:["Notes ",i.notes]}),Object(v.jsxs)("p",{className:"recipe-list-text-profile",children:[" ",i.body," "]})]},i.id),Object(v.jsx)("button",{className:"btn btn-danger btn-lg btn-block",type:"button ",onClick:function(){return t.removeRecipe(i)},children:"Delete"}),Object(v.jsx)("button",{type:"button",className:"btn btn-secondary btn-lg btn-block",onClick:function(){return t.setState({isEditing:!t.state.isEditing})},children:"Edit"})]})}}]),i}(n.Component),_=function(e){Object(j.a)(i,e);var t=Object(m.a)(i);function i(){return Object(p.a)(this,i),t.apply(this,arguments)}return Object(u.a)(i,[{key:"render",value:function(){var e=this.props.recipes.filter((function(e){return"Public"===e.published?e:console.log("nope")})).map((function(e){return Object(v.jsx)("div",{className:"listImg",children:Object(v.jsx)("a",{href:"/recipe/".concat(e.id),children:Object(v.jsx)("img",{className:"homepage-img",src:e.image,alt:"preview"})})},e.id)}));return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("div",{className:"divider  col-4 col-md-6 col-lg-8 col-xl-9",children:"Public Repices"})}),Object(v.jsxs)("ul",{className:"row",children:[" ",e,"  "]})]})}}]),i}(n.Component),R=function(e){Object(j.a)(i,e);var t=Object(m.a)(i);function i(e){var n;return Object(p.a)(this,i),(n=t.call(this,e)).state={recipe:[],isEditing:!1,yields:null,newyields:null},n.handleEdit=n.handleEdit.bind(Object(h.a)(n)),n.handleInputEdit=n.handleInputEdit.bind(Object(h.a)(n)),n.filterRecipes=n.filterRecipes.bind(Object(h.a)(n)),n}return Object(u.a)(i,[{key:"componentDidMount",value:function(){var e=this;fetch("/api/v1/".concat(this.props.match.params.id)).then((function(e){return e.json()})).then((function(t){console.log("response",t),e.setState({recipe:t,yields:t.yields,newyields:t.yields})}),(function(t){e.setState({error:t})}))}},{key:"handleEdit",value:function(e,t){13===e.keyCode&&(this.setState({isEditing:!1}),this.setState({newyields:t}))}},{key:"handleInputEdit",value:function(e){this.setState(Object(w.a)({},e.target.name,e.target.value))}},{key:"filterRecipes",value:function(e){console.log("I'm firing");var t=e.target.dataset.type;this.setState({recipeSelection:t})}},{key:"render",value:function(){var e,t=this,i=this.state.recipe,n=this.state.newyields/this.state.yields,s=null===(e=this.state.recipe.ingredients)||void 0===e?void 0:e.map((function(e,t){return Object(v.jsx)("li",{children:Object(v.jsxs)("h2",{children:[e.qty*n," ",e.unit," of ",e.type,"  "]})},t)}));return console.log("recipe",i),Object(v.jsx)(v.Fragment,{children:Object(v.jsx)("div",{className:"row",children:Object(v.jsxs)("div",{className:"repice-li col-8 mx-auto",children:[Object(v.jsx)("h4",{className:"repice-title",children:i.title}),Object(v.jsxs)("p",{className:"repice-author",children:["By: ",i.author]}),Object(v.jsx)("div",{className:"img-container",children:Object(v.jsx)("img",{className:"recipe-img",src:i.image,alt:"preview"})}),Object(v.jsx)("p",{className:"repice-type",children:i.type_meal}),this.state.isEditing?Object(v.jsx)("input",{type:"number",min:"0",step:"".concat(i.yields),name:"newyields",value:this.state.newyields,onChange:this.handleInputEdit,onKeyUp:function(e){return t.handleEdit(e,t.state.newyields)}}):Object(v.jsxs)("span",{className:"repice-yields",children:["yields ",this.state.newyields," "]}),this.state.isEditing?null:Object(v.jsx)("button",{className:"btn btn-outline-success",type:"button",onClick:function(){return t.setState({isEditing:!t.state.isEditing})},children:"Make More"}),Object(v.jsx)("br",{}),Object(v.jsxs)("span",{className:"repice-type",children:["Prep time: ",i.prep_time," |"]}),Object(v.jsxs)("span",{className:"repice-type",children:["Cook time: ",i.cook_time," |"]}),Object(v.jsxs)("span",{className:"repice-type",children:[" ",i.cook_temp," ",i.degree," |"]}),Object(v.jsx)("p",{className:"repice-list-text",children:i.directions}),Object(v.jsx)("ul",{children:s}),Object(v.jsxs)("p",{className:"repice-published",children:["This repice is ",i.published]}),Object(v.jsxs)("p",{className:"repice-published",children:["Directions ",i.directions]}),Object(v.jsxs)("p",{className:"repice-published",children:["Notes ",i.notes]}),Object(v.jsxs)("p",{className:"recipe-list-text-profile",children:[" ",i.body," "]})]})})})}}]),i}(n.Component),q=function(e){Object(j.a)(i,e);var t=Object(m.a)(i);function i(e){var n;return Object(p.a)(this,i),(n=t.call(this,e)).state={username:"",email:"",password1:"",password2:""},n.handleInput=n.handleInput.bind(Object(h.a)(n)),n}return Object(u.a)(i,[{key:"handleInput",value:function(e){this.setState(Object(w.a)({},e.target.name,e.target.value))}},{key:"render",value:function(){var e=this;return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)("form",{className:"regform",onSubmit:function(t){return e.props.handleRegistration(t,e.state)},children:[Object(v.jsx)("input",{className:"reginput",type:"text",name:"username",value:this.state.username,placeholder:"username",onChange:this.handleInput,required:!0}),Object(v.jsx)("input",{className:"reginput",type:"email",name:"email",value:this.state.email,placeholder:"email",onChange:this.handleInput,required:!0}),Object(v.jsx)("input",{className:"reginput",type:"password",name:"password1",value:this.state.password1,placeholder:"password",onChange:this.handleInput,required:!0}),Object(v.jsx)("input",{className:"reginput",type:"password",name:"password2",value:this.state.password2,placeholder:"confirm password",onChange:this.handleInput,required:!0}),Object(v.jsx)("button",{className:"btn",type:"submit",children:"Register"})]})})}}]),i}(n.Component),E=function(e){Object(j.a)(i,e);var t=Object(m.a)(i);function i(e){var n;return Object(p.a)(this,i),(n=t.call(this,e)).state={isEditing:!1,recipeSelection:"All",title:"",prep_time:"",cook_time:"",cook_temp:"",yields:"",food_type:"",ingredients:[],directions:"",notes:"",viewAll:""},n.handleEdit=n.handleEdit.bind(Object(h.a)(n)),n.handleInputEdit=n.handleInputEdit.bind(Object(h.a)(n)),n.filterRecipes=n.filterRecipes.bind(Object(h.a)(n)),n}return Object(u.a)(i,[{key:"handleEdit",value:function(e,t){13===e.keyCode&&(this.props.editRecipe(t,this.state.note),this.setState({isEditing:!1}))}},{key:"handleInputEdit",value:function(e){this.setState(Object(w.a)({},e.target.name,e.target.value))}},{key:"filterRecipes",value:function(e){console.log("I'm firing");var t=e.target.dataset.type;this.setState({recipeSelection:t})}},{key:"render",value:function(){var e=this,t=this.props.recipes.filter((function(e){var t;return(null===(t=JSON.parse(localStorage.getItem("user")))||void 0===t?void 0:t.username)===e.author?e:console.log("nope")})).map((function(e){return Object(v.jsx)("div",{className:"listImg",children:Object(v.jsx)("a",{href:"/recipe/".concat(e.id),children:Object(v.jsx)("img",{className:"homepage-img",src:e.image,alt:"preview"})})},e.id)})),i=this.props.recipes.filter((function(e){return"Popular"===e.published?e:console.log("nope")})).map((function(e){return Object(v.jsx)("div",{className:"listImg",children:Object(v.jsx)("a",{href:"/recipe/".concat(e.id),children:Object(v.jsx)("img",{className:"homepage-img",src:e.image,alt:"preview"})})},e.id)})),n=this.props.recipes.filter((function(e){return"Draft"===e.published?e:console.log("nope")})).map((function(e){return Object(v.jsx)("div",{className:"listImg",children:Object(v.jsx)("a",{href:"/recipe/".concat(e.id),children:Object(v.jsx)("img",{className:"homepage-img",src:e.image,alt:"preview"})})},e.id)})),s=this.props.recipes.filter((function(e){return"Public"===e.published?e:console.log("nope")})).map((function(e){return Object(v.jsx)("div",{className:"listImg",children:Object(v.jsx)("a",{href:"/recipe/".concat(e.id),children:Object(v.jsx)("img",{className:"homepage-img",src:e.image,alt:"preview"})})},e.id)}));return Object(v.jsxs)(v.Fragment,{children:[this.props.isLoggedIn?Object(v.jsx)("div",{className:"row",children:Object(v.jsxs)("div",{className:"divider  col-4 col-md-6 col-lg-8 col-xl-9",children:["My Repices ",Object(v.jsx)("span",{className:"float-right",onClick:function(){return e.setState({viewAll:"My"})},children:"Veiw Alls"})]})}):null,"My"===this.state.viewAll?Object(v.jsxs)("ul",{className:"row",children:[" ",t,"  "]}):Object(v.jsxs)("ul",{className:"row flex-nowrap",children:[" ",t,"  "]}),Object(v.jsx)("div",{className:"row",children:Object(v.jsxs)("div",{className:"divider  col-4 col-md-6 col-lg-8 col-xl-9",children:["Public Repices ",Object(v.jsx)("span",{className:"float-right",onClick:function(){return e.setState({viewAll:"Public"})},children:"Veiw Alls"})]})}),"Public"===this.state.viewAll?Object(v.jsxs)("ul",{className:"row public",children:[" ",s,"  "]}):Object(v.jsxs)("ul",{className:"row flex-nowrap public",children:[" ",s,"  "]}),Object(v.jsx)("div",{className:"row",children:Object(v.jsxs)("div",{className:"divider  col-4 col-md-6 col-lg-8 col-xl-9",children:["Popular Repices ",Object(v.jsx)("span",{className:"float-right",onClick:function(){return e.setState({viewAll:"Popular"})},children:"Veiw Alls"})]})}),"Popular"===this.state.viewAll?Object(v.jsxs)("ul",{className:"row public",children:[" ",i,"  "]}):Object(v.jsxs)("ul",{className:"row flex-nowrap public",children:[" ",i,"  "]}),Object(v.jsx)("div",{className:"row",children:Object(v.jsxs)("div",{className:"divider  col-4 col-md-6 col-lg-8 col-xl-9",children:["My Pantry ",Object(v.jsx)("span",{className:"float-right",onClick:function(){return e.setState({viewAll:"Draft"})},children:"Veiw Alls"})]})}),"Draft"===this.state.viewAll?Object(v.jsxs)("ul",{className:"row public",children:[" ",n,"  "]}):Object(v.jsxs)("ul",{className:"row flex-nowrap public",children:[" ",n,"  "]})]})}}]),i}(n.Component),L=function(e){Object(j.a)(i,e);var t=Object(m.a)(i);function i(e){var n;return Object(p.a)(this,i),(n=t.call(this,e)).state={username:"",email:"",password:""},n.handleInput=n.handleInput.bind(Object(h.a)(n)),n.handleLogin=n.handleLogin.bind(Object(h.a)(n)),n}return Object(u.a)(i,[{key:"handleInput",value:function(e){this.setState(Object(w.a)({},e.target.name,e.target.value))}},{key:"handleLogin",value:function(e,t){this.props.handleLogin(e,this.state),this.props.history.push("/recipes")}},{key:"render",value:function(){var e,t,i=this;return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)("form",{className:"loginform",onSubmit:function(e){return i.handleLogin(e,i.state)},children:[Object(v.jsx)("input",{type:"text",name:"username",value:null===(e=this.state)||void 0===e?void 0:e.username,placeholder:"username",onChange:this.handleInput,required:!0}),Object(v.jsx)("br",{}),Object(v.jsx)("input",{type:"password",name:"password",value:null===(t=this.state)||void 0===t?void 0:t.password,placeholder:"password",onChange:this.handleInput,required:!0}),Object(v.jsx)("br",{}),Object(v.jsx)("button",{className:"btn",type:"submit",children:"Login"})]})})}}]),i}(n.Component),P=Object(x.f)(L),T=(i(41),function(e){Object(j.a)(i,e);var t=Object(m.a)(i);function i(e){var n;return Object(p.a)(this,i),(n=t.call(this,e)).state={clickedId:null,recipes:[],recipeImage:null,preview:"",isLoggedIn:!!g.a.get("Authorization")},n.addRecipe=n.addRecipe.bind(Object(h.a)(n)),n.removeRecipe=n.removeRecipe.bind(Object(h.a)(n)),n.editRecipe=n.editRecipe.bind(Object(h.a)(n)),n.handleImage=n.handleImage.bind(Object(h.a)(n)),n.handleLogin=n.handleLogin.bind(Object(h.a)(n)),n.handleLogOut=n.handleLogOut.bind(Object(h.a)(n)),n.handleRegistration=n.handleRegistration.bind(Object(h.a)(n)),n}return Object(u.a)(i,[{key:"componentDidMount",value:function(){var e=this;fetch("/api/v1/").then((function(e){return e.json()})).then((function(t){console.log("response",t),e.setState({recipes:t})}),(function(t){e.setState({error:t})}))}},{key:"addRecipe",value:function(e){var t=Object(d.a)(this.state.recipes);t.push(e),this.setState({recipes:t}),this.setState({recipeImage:null,preview:""})}},{key:"removeRecipe",value:function(e){var t=Object(d.a)(this.state.recipes),i=t.indexOf(e);t.splice(i,1),this.setState({recipes:t}),fetch("/api/v1/edit/".concat(e.id),{method:"DELETE",headers:{"Content-Type":"application/json","X-CSRFToken":g.a.get("csrftoken")}}).then((function(e){if(!e.ok)throw new Error("Bad Post request")})).catch((function(e){return console.log("Error:",e)})).finally("I am always going to fire!")}},{key:"editRecipe",value:function(e,t){var i=Object(d.a)(this.state.recipes);e.notes=t,this.setState({recipes:i}),fetch("/api/v1/edit/".concat(e.id),{method:"PUT",headers:{"Content-Type":"application/json","X-CSRFToken":g.a.get("csrftoken")},body:JSON.stringify(e)}).then((function(e){if(!e.ok)throw new Error("Bad Post request");return e.json()})).then((function(e){return console.log("Success. Recipe created!")})).catch((function(e){return console.log("Error:",e)})).finally("I am always going to fire!")}},{key:"handleLogin",value:function(){var e=Object(o.a)(l.a.mark((function e(t,i){var n,s,a,c,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n={method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":g.a.get("csrftoken")},body:JSON.stringify(i)},s=function(e){return console.warn(e)},e.next=5,fetch("/rest-auth/login/",n);case 5:return a=e.sent,e.next=8,a.json().catch(s);case 8:c=e.sent,console.log("data",c),c.key&&(g.a.set("Authorization","Token ".concat(c.key)),r={username:c.username},localStorage.setItem("user",JSON.stringify(r)),this.setState({isLoggedIn:!0}));case 11:case"end":return e.stop()}}),e,this)})));return function(t,i){return e.apply(this,arguments)}}()},{key:"handleLogOut",value:function(){var e=Object(o.a)(l.a.mark((function e(t){var i,n,s,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(this.state.isLoggedIn),t.preventDefault(),alert("logging out"),i={method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":g.a.get("csrftoken")}},n=function(e){return console.warn(e)},e.next=7,fetch("/rest-auth/logout/",i);case 7:return s=e.sent,e.next=10,s.json().catch(n);case 10:a=e.sent,console.log(a),g.a.remove("Authorization"),this.setState({isLoggedIn:!1}),localStorage.removeItem("user");case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleRegistration",value:function(){var e=Object(o.a)(l.a.mark((function e(t,i){var n,s,a,c,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n={method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":g.a.get("csrftoken")},body:JSON.stringify(i)},s=function(e){return console.warn(e)},e.next=5,fetch("/rest-auth/registration/",n);case 5:return a=e.sent,e.next=8,a.json().catch(s);case 8:c=e.sent,console.log(c),c.key&&(g.a.set("Authorization","Token ".concat(c.key)),r={username:c.username},localStorage.setItem("user",JSON.stringify(r)),this.setState({isLoggedIn:!0}));case 11:case"end":return e.stop()}}),e,this)})));return function(t,i){return e.apply(this,arguments)}}()},{key:"handleImage",value:function(e){var t=this,i=e.target.files[0];this.setState({recipeImage:i});var n=new FileReader;n.onloadend=function(){t.setState({preview:n.result})},n.readAsDataURL(i)}},{key:"render",value:function(){return Object(v.jsx)("div",{className:"container",children:Object(v.jsx)("div",{className:"row flex-nowrap",children:Object(v.jsx)("div",{className:"nav-bar",children:Object(v.jsxs)(O.a,{children:[Object(v.jsx)(f,{handleLogOut:this.handleLogOut,isLoggedIn:this.state.isLoggedIn}),Object(v.jsx)(x.c,{children:Object(v.jsxs)("div",{className:"row flex-nowrap",children:[Object(v.jsx)("div",{className:"sidenav col-6 col-md-4 col-lg-3 col-xl-2",children:Object(v.jsx)(y,{isLoggedIn:this.state.isLoggedIn})}),Object(v.jsxs)("div",{className:"col-6 col-md",children:[Object(v.jsx)(x.a,{path:"/login",children:Object(v.jsx)(P,{isLoggedIn:this.state.isLoggedIn,handleLogin:this.handleLogin})}),Object(v.jsx)(x.a,{path:"/register",children:Object(v.jsx)(q,{isLoggedIn:this.state.isLoggedIn,handleRegistration:this.handleRegistration})}),Object(v.jsx)(x.a,{exact:!0,path:"/recipes",children:Object(v.jsx)(E,{recipes:this.state.recipes,editRecipe:this.editRecipe,preview:this.state.preview,recipeImage:this.state.recipeImage,handleImage:this.handleImage,addRecipe:this.addRecipe})}),Object(v.jsx)(x.a,{path:"/user/recipes",children:Object(v.jsx)(k,{recipes:this.state.recipes,removeRecipe:this.removeRecipe,editRecipe:this.editRecipe})}),Object(v.jsx)(x.a,{path:"/recipeform",children:Object(v.jsx)(C,{preview:this.state.preview,recipeImage:this.state.recipeImage,handleImage:this.handleImage,addRecipe:this.addRecipe})}),Object(v.jsx)(x.a,{exact:!0,path:"/recipe/:id",component:R}),Object(v.jsx)(x.a,{exact:!0,path:"/recipe/edit/:id",component:S}),Object(v.jsx)(x.a,{excat:!0,path:"/public/recipes",children:Object(v.jsx)(_,{recipes:this.state.recipes})}),Object(v.jsx)(x.a,{exact:!0,path:"/",children:Object(v.jsx)(E,{recipes:this.state.recipes,removeRecipe:this.removeRecipe,editRecipe:this.editRecipe,preview:this.state.preview,recipeImage:this.state.recipeImage,handleImage:this.handleImage,addRecipe:this.addRecipe})})]})]})})]})})})})}}]),i}(n.Component)),D=function(e){e&&e instanceof Function&&i.e(3).then(i.bind(null,43)).then((function(t){var i=t.getCLS,n=t.getFID,s=t.getFCP,a=t.getLCP,c=t.getTTFB;i(e),n(e),s(e),a(e),c(e)}))};c.a.render(Object(v.jsx)(s.a.StrictMode,{children:Object(v.jsx)(T,{})}),document.getElementById("root")),D()}},[[42,1,2]]]);
//# sourceMappingURL=main.71d6d980.chunk.js.map